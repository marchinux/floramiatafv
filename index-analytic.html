<!DOCTYPE html>
<html lang="en">
    <!-- START: Head-->
    <head>
        <meta charset="UTF-8">
        <title>Floaramiata dashboard fotovoltaico</title>
        <link rel="shortcut icon" href="dist/images/favicon.ico" />
        <meta name="viewport" content="width=device-width,initial-scale=1"> 

        <!-- START: Template CSS-->
        <link rel="stylesheet" href="dist/vendors/bootstrap/css/bootstrap.css">
        <link rel="stylesheet" href="dist/vendors/jquery-ui/jquery-ui.min.css">
        <link rel="stylesheet" href="dist/vendors/jquery-ui/jquery-ui.theme.min.css">
        <link rel="stylesheet" href="dist/vendors/simple-line-icons/css/simple-line-icons.css">        
        <link rel="stylesheet" href="dist/vendors/flags-icon/css/flag-icon.min.css"> 
        <link rel="stylesheet" href="dist/vendors/flag-select/css/flags.css">

        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        
        <!-- END Template CSS-->

        <!-- START: Page CSS-->   
        <link rel="stylesheet" href="dist/vendors/morris/morris.css"> 
        <link rel="stylesheet" href="dist/vendors/weather-icons/css/pe-icon-set-weather.min.css"> 
        <link rel="stylesheet" href="dist/vendors/chartjs/Chart.min.css"> 
        <link rel="stylesheet" href="dist/vendors/starrr/starrr.css"> 
        <link href="dist/vendors/bootstrap-tour/css/bootstrap-tour-standalone.min.css" rel="stylesheet"> 
        <link rel="stylesheet" href="dist/vendors/fontawesome/css/all.min.css">
        <link rel="stylesheet" href="dist/vendors/ionicons/css/ionicons.min.css"> 
        <link rel="stylesheet" href="dist/vendors/cryptofont/cryptofont.css">  
        <!-- END: Page CSS-->

        <!-- START: Custom CSS-->
        <link rel="stylesheet" href="dist/css/main.css">
        <!-- END: Custom CSS-->
    </head>
    <!-- END Head-->

    <!-- START: Body-->
    <body id="main-container" class="default hide-sidebar" style="--primarycolor: #76c335;">
       

        <!-- START: Main Menu-->
        <div class="sidebar">
            <a href="#" class="sidebarCollapse float-right h6 dropdown-menu-right mr-2 mt-2 position-absolute d-block d-lg-none">
                <i class="icon-close"></i>
            </a>
            <!-- START: Logo-->
            <a href="index.html" class="sidebar-logo d-flex">
                <img src="assets/images/logo_verde_floramiata.png" alt="logo" width="200" class="img-fluid mr-2"/>
                <!-- <span class="h5 align-self-center mb-0">POLLO</span>         -->
            </a>
            <!-- END: Logo-->

            <!-- START: Menu-->
           
        </div>

        <main>
            <div class="container-fluid">
                <!-- START: Breadcrumbs-->
                <div class="row">
                    <div class="col-12  align-self-center">
                        <div class="sub-header mt-3 py-3 px-3 align-self-center d-sm-flex w-100 rounded">
                            <a href="index.html" class="sidebar-logo d-flex">
                                <img src="assets/images/logo_verde_floramiata.png" alt="logo"  class="img-fluid mr-3" style="width: 300px;"/>
                            </a>
                            <div class="w-sm-100 mr-auto ml-4"><h3 class="mb-0">   Impianto fotovoltaico Floramiata
                            </h3><h5>   Casa del Corto - <span id="currentDate"></span></h5> 
                                <script>
                                    var today = new Date();
                                    var day = today.getDay();
                                    var daynum = today.getDate();
                                    var month = today.getMonth();
                                    var daylist = ["Domenica", "Lunedì", "Martedì", "Mercoledì", "Giovedì", "Venerdì", "Sabato"];
                                    var monthslist = ["Gennaio", "Febbraio", "Marzo", "Aprile ", "Maggio", "Giugno", "Luglio", "Agosto", "Settembre", "Ottobre", "Novembre", "Dicembre"];
                                    // console.log("Today is : " + daylist[day] + ".");
                                    var hour = today.getHours();
                                    var currentHours = ('0' + today.getHours()).substr(-2);
                                    var minute = ('0' + today.getMinutes()).substr(-2);
                                    var second = today.getSeconds();
                                    document.getElementById("currentDate").innerHTML = daylist[day] + " " + daynum + " " + monthslist[month] + " " + today.getFullYear() + " - " + currentHours + " : " + minute;
                                </script>                                  
                            </div>                           
                        </div>
                    </div>
                </div>
                <div class="row">
                    <!-- <div class="col-8"> -->
                    <div class="col-12 col-xl-8 col-lg-9 col-sm-12 col-xs-12 mt-1">
                        <div class="card">
                            <div class="card-body text-center">
                                <div id="carouselPanel" class="carousel slide" data-ride="carousel">
                                    <div class="carousel-inner">
                                      <div class="carousel-item active" style="overflow:hidden;">
                                        <img class="d-block w-100 img-fluid" src="assets/images/dieffenbachia.jpg" alt="First slide">
                                      </div>
                                      <div class="carousel-item">
                                        <img class="d-block w-100 img-fluid" src="assets/images/anthurium.jpg" alt="Second slide">
                                      </div>
                                      <div class="carousel-item">
                                        <img class="d-block w-100 img-fluid" src="assets/images/dettaglio.jpg" alt="Second slide">
                                      </div>
                                      <!-- <div class="carousel-item">
                                        <img class="d-block w-100" src="..." alt="Third slide">
                                      </div> -->
                                    </div>
                                    <a class="carousel-control-prev" href="#carouselPanel" role="button" data-slide="prev">
                                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                                        <span class="sr-only">Previous</span>
                                      </a>
                                      <a class="carousel-control-next" href="#carouselPanel" role="button" data-slide="next">
                                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                                        <span class="sr-only">Next</span>
                                      </a>
                                  </div>                                                            
                                <!-- <img class="man-with-laptop img-fluid" src="https://demo.templateflip.com/super/images/illustrations/hello3.svg" alt=""> -->
                            </div>
                        </div>
                    </div>
                    <!-- <div class="col-4"> -->
                    <div class="col-12 col-xl-4 col-lg-3 col-sm-12 col-xs-12 mt-1">
                        <div class="card">
                            <div class="card-body text-center p-0">
                                <a class="weatherwidget-io" href="https://forecast7.com/en/42d8211d73/casa-del-corto/"
                            data-label_1="Floramiata" data-label_2="Meteo" data-mode="Current"
                            data-theme="pure">CAMPOSTAGGIA Meteo</a>
                          <script>
                            !function (d, s, id) { var js, fjs = d.getElementsByTagName(s)[0]; if (!d.getElementById(id)) { js = d.createElement(s); js.id = id; js.src = 'https://weatherwidget.io/js/widget.min.js'; fjs.parentNode.insertBefore(js, fjs); } }(document, 'script', 'weatherwidget-io-js');
                          </script>
                                <!-- <div id="eth_apex_area_chart" class="min-height-auto"></div> -->
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-body text-center p-0">
                                <div class="px-4 pt-4 pb-0 d-flex">
                                    <span class="fa fa-bolt fa-3x" style="color:orange"></span>
                                    <div class="w-100 text-right">
                                        <h5 class="card-title m-9">Potenza istantanea (kW)</h5>
                                        <h4 id="p_istantanea" class="card-title  m-9">88,56</h4>
                                    </div>
                                </div>
                                <!-- <div id="eth_apex_area_chart" class="min-height-auto"></div> -->
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-body text-center p-0">
                                <div class="px-4 pt-4 pb-0 d-flex">
                                    <span class="fa fa-battery-3 fa-3x" style="color:green"></span>
                                    <div class="w-100 text-right">
                                        <h5 class="card-title m-9">Energia oggi (kWh)</h5>
                                        <h4 id="p_oggi" class="card-title  m-9">198,56</h4>
                                    </div>
                                </div>
                                <!-- <div id="bch_apex_area_chart" class="min-height-auto"></div> -->
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-body text-center p-0">
                                <div class="px-4 pt-4 pb-0 d-flex">
                                    <span class="fa fa-signal fa-3x" style="color:green"></span>
                                    <div class="w-100 text-right">
                                        <h5 class="card-title m-9">Energia totale (kWh)</h5>
                                        <div class="text-muted">Dal 01-01-2023</div>
                                        <h4 id="p_totale" class="card-title  m-9">2000,56</h4>
                                    </div>
                                </div>
                                <!-- <div id="bch_apex_area_chart" class="min-height-auto"></div> -->
                            </div>
                        </div>
                        <div class="card">
                            <div class="card-body text-center p-0">
                                <div class="px-4 pt-4 pb-0 d-flex">
                                    <span class="fa fa-leaf fa-3x" style="color:green"></span>
                                    <div class="w-100 text-right">
                                        <h5 class="card-title m-9">CO2: Tonnellate evitate<sub><a href="file:///Users/marcodanero/svil/webprojects/laravelsites/floramiata/index-analytic.html"> ( fonte ispra )</a></sub></sub></h5>
                                        <div class="text-muted">Dal 01-04-2023</div>
                                        <h4 id="co2" class="card-title  m-9">12</h4>
                                    </div>
                                </div>
                                <div class="px-4  pb-0 d-flex">
                                <div class="w-100 text-right">
                                <div class="text-muted">equivalente di </div>
                                </div>
                                </div>
                                <div class="px-4 pt-4 pb-0 d-flex">
                                    <span class="fa fa-car fa-3x" style="color:orange"></span>
                                    <div class="w-100 text-right">
                                        <h5 class="card-title  m-9"><span id="co2-km">12000</span><span> KM percorsi <sub><a href="https://www.researchgate.net/publication/256377175_Carbon_footprint_of_patient_journeys_through_primary_care_A_mixed_methods_approach"> ( fonte )</a></sub></span></h4>
                                    </div>
                                </div>
                                <div class="px-4 pt-4 pb-0 d-flex">
                                    <span class="fa fa-tree fa-3x mb-3" style="color:green"></span>
                                    <div class="w-100 text-right">
                                        <h5 class="card-title  m-9"><span id="co2-trees">72</span><span> alberi / 1 anno <sub><a href="https://www.eea.europa.eu/articles/forests-health-and-climate-change/key-facts/"> ( fonte )</a></sub></span></h4>
                                    </div>
                                </div>
                                <!-- <div id="bch_apex_area_chart" class="min-height-auto"></div> -->
                            </div>
                        </div>
                    </div>
                </div>
                <!-- END: Card DATA-->
            </div>
        </main>
        <!-- END: Content-->

        <!-- START: Footer-->
        <footer class="site-footer">©2023 Floramiata</footer>
        
        
       
        <script src="dist/vendors/jquery/jquery-3.3.1.min.js"></script>
        <script src="dist/vendors/jquery-ui/jquery-ui.min.js"></script>
        <script src="dist/vendors/moment/moment.js"></script>
        <script src="dist/vendors/bootstrap/js/bootstrap.bundle.min.js"></script>    
        <script src="dist/vendors/slimscroll/jquery.slimscroll.min.js"></script>
        <script src="dist/vendors/flag-select/js/jquery.flagstrap.min.js"></script> 
        
        <script src="dist/vendors/raphael/raphael.min.js"></script>
        <script src="dist/vendors/morris/morris.min.js"></script>
        <script src="dist/vendors/chartjs/Chart.min.js"></script>
        <script src="dist/vendors/starrr/starrr.js"></script>
        <script src="dist/vendors/jquery-flot/jquery.canvaswrapper.js"></script>
        <script src="dist/vendors/jquery-flot/jquery.colorhelpers.js"></script>
        <script src="dist/vendors/jquery-flot/jquery.flot.js"></script>
        <script src="dist/vendors/jquery-flot/jquery.flot.saturated.js"></script>
        <script src="dist/vendors/jquery-flot/jquery.flot.browser.js"></script>
        <script src="dist/vendors/jquery-flot/jquery.flot.drawSeries.js"></script>
        <script src="dist/vendors/jquery-flot/jquery.flot.uiConstants.js"></script>
        <script src="dist/vendors/jquery-flot/jquery.flot.legend.js"></script>
        <script src="dist/vendors/jquery-flot/jquery.flot.pie.js"></script>
        <script src="dist/vendors/bootstrap-tour/js/bootstrap-tour-standalone.min.js"></script>
        <script src="dist/vendors/apexcharts/apexcharts.min.js"></script> 
        <script src="dist/vendors/amcharts/core.js"></script>
        <script src="dist/vendors/amcharts/charts.js"></script>
        <script src="dist/vendors/amcharts/animated.js"></script>
        <script src="dist/vendors/amcharts/amchartsdark.js"></script>
        <!-- END: Page Vendor JS-->

        <!-- START: Page JS-->
        <script src="dist/js/analytic.script.js"></script>
        <!-- END: Page JS-->
        <script>
            $(document).ready(
              function () {
                console.log("READY PAGE");
                $.getJSON('./files/data.json', function (data) {
                  sostituisci(data);
                });
                setInterval(function () {
                  $.getJSON('./files/data.json', function (data) {
                    sostituisci(data);
                    aggiornaora();
                  });
                }, 3000);
              });
      
            function sostituisci(data) {
              console.log("aggiornamento")
              document.getElementById("p_istantanea").innerHTML = data["p_inst"].toString();
              document.getElementById("p_oggi").innerHTML = data["e_today"].toString();
              document.getElementById("p_totale").innerHTML = data["e_total"].toString();
              document.getElementById("co2").innerHTML = data["co2"].toString();
              document.getElementById("co2-km").innerHTML = data["km"].toString();
              document.getElementById("co2-trees").innerHTML = data["trees"].toString();
            }
      
            function aggiornaora() {
              var today = new Date();
              var day = today.getDay();
              var daynum = today.getDate();
              var month = today.getMonth();
              var daylist = ["Domenica", "Lunedì", "Martedì", "Mercoledì", "Giovedì", "Venerdì", "Sabato"];
              var monthslist = ["Gennaio", "Febbraio", "Marzo", "Aprile ", "Maggio", "Giugno", "Luglio", "Agosto", "Settembre", "Ottobre", "Novembre", "Dicembre"];
              // console.log("Today is : " + daylist[day] + ".");
              var hour = today.getHours();
              var currentHours = ('0' + today.getHours()).substr(-2);
              var minute = ('0' + today.getMinutes()).substr(-2);
              var second = today.getSeconds();
              document.getElementById("currentDate").innerHTML = daylist[day] + " " + daynum + " " + monthslist[month] + " " + today.getFullYear() + " - " + currentHours + " : " + minute;
            }

    </script>
    </body>
    <!-- END: Body-->
</html>
